此处为一些常见的问题解答 不定期更新  ---- By Rin

---------------------------------------------------
	本程序开源并永久免费，如有付费，请向其申请退款

	买倒卖不如请我喝奶茶：
	https://afdian.com/a/RoseRin
---------------------------------------------------


一、无法运行，报错时的问题：


0.	Q:	我是全新安装，该如何做？
	A:	【依次】参考本教程第一部分的【第2条】和【第1条】进行配置，再参考第一部分的【第3条】启动程序。

1.	Q:	如何重新安装环境（如何从CPU环境切换到GPU环境）
	A:
		(1) 首先确认你是N卡(其他显卡或者使用CPU也可运行，但不保证运行状况)
		(2) 再把现在的环境删了，打开PowerShell输入，新安装跳过本步骤
			conda remove --name mc (conda类报错请查看本教程 (第一部分的第2条) 里面的miniconda3安装教程)
		(3) 然后重新创建mc环境
			conda create -n mc python=3.10 (conda类报错请查看本教程 (第一部分的第2条) 里面的miniconda3安装教程)
		(4)	之后进入mc环境
			conda activate mc
		(5)	安装cudatoolkit和paddle
			conda install paddlepaddle-gpu==2.6.1 cudatoolkit=11.7 -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/Paddle/ -c conda-forge
		(6)	再cd到你项目文件夹(例如你的脚本文件夹在c:\mctool的话)
			c:
			cd c:\mctool
		(7)	然后再安装依赖，择一安装即可，英伟达显卡用户(GTX)优先N卡GPU，如果不是N卡(AMD等)请尝试dml，如果还是不行再尝试CPU。
			N卡GPU版本：
			pip install -r .\requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
			DML版本：(此条来自于主仓库pr #264 by @Dryhten-tech)
			pip install -r .\requirements_dml.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
			CPU版本：
			pip install -r .\requirements_cpu.txt -i https://pypi.tuna.tsinghua.edu.cn/simple


2.	Q:	安装miniconda3的方法（执行conda命令报错时）
	A:
		(1)	下载https://repo.anaconda.com/miniconda/Miniconda3-py310_24.4.0-0-Windows-x86_64.exe
		(2)	点Next→选Just Me之后Next→安装路径不要带中文，记住你装在哪个盘的哪里的。 【重要→】之后Next→2要打勾添加环境变量【←重要】。之后Install。
		(3)	打开PowerShell输入你安装conda的盘符（如d:）
		(4)	跳转到你的coda目录（如cd D:\miniconda3\condabin）
		(5)	输入./conda init后重启PowerShell
		(6)	重启后你的输入的地方前面应该有(base)，如果没有，那么conda安装有问题，跳转到(1)。

3.	Q:	依赖安装完成后如何启动程序？
	A:
		(0) 首先，你需要先确认你已经配置好了config.yaml和echo_config.yaml (从config.example.yaml和echo_config.yaml复制后重命名)
		(1) 方法1：手动运行
			Ⅰ 	管理员权限启动powershell并切换到conda的mc环境
				conda activate mc
			Ⅱ 	切换到程序项目目录下(例如程序目录为：E:\mc_auto_boss_Rin)
				E:
				cd E:\mc_auto_boss_Rin
				如有空格需要将路径用英文引号""括起来
			Ⅲ 	运行程序
				python .\background\main.py
		(2) 方法2：一键运行：
			Ⅰ 	新建一个文本档案，将下述代码复制进去保存并改名为Start.ps1(ps1,123的1,不是l也不是i)
					if (!([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator"))
					{
					    Write-Warning "此脚本必须以管理员身份运行。"
					    Start-Process powershell.exe "-File $PSCommandPath" -Verb RunAs
					    exit
					}
					$scriptDir = Split-Path -Parent $MyInvocation.MyCommand.Path
					conda activate mc
					if ($LASTEXITCODE -ne 0) {
					    Write-Error "激活 conda 环境 mc 失败。请检查 conda 安装和环境名称。"
					    exit $LASTEXITCODE
					} else {
					    Write-Output "成功激活 conda 环境 mc。"
					}
					Write-Output "`n使用说明:`n快捷键	功能`nF5	开始刷BOSS`nF6	开始合成声骸`nF7	暂停运行`nF8	执行背包声骸锁定`nF12	停止运行`n"
					python $scriptDir\background\main.py
			Ⅱ 	以后直接右键点击Start.ps1选择以powershell运行即可运行脚本。
				如果运行出现乱码，可能是文本编辑器的文本编码与powershell的有所不同导致，请右键该ps1文件点击编辑，再把上述代码粘贴进去即可。

4.  Q:	报错ModuleNotFoundError: No model named 'XXX'
	A:	首先切换到你的mc环境：
		conda activate mc
		下载依赖模块：
		pip install XXX

5. 	Q:	报错 in "x:\xxx\xxx\config.yaml", Line XX, column YY
	A:	Config文件的XX行YY列有问题

6.	Q:	报错 ImportError: DLL load failed while importing onnxruntime_pybind11_state: 动态链接库(DLL)初始化例程失败。
	A:	conda install conda-forge::vs2015_runtime
	(此条解决方法来源于Github Issues #205 By:sailikas)

7.	Q:	A卡怎么办？
	A:	使用CPU运算，或者尝试使用dml运算。

8.  Q:	自动更新时老是报错怎么办？
	A:  手动下载Git并安装，安装时记得勾选添加环境变量(见第一部分第9条)。
		Git下载地址：https://github.com/git-for-windows/git/releases/download/v2.45.2.windows.1/Git-2.45.2-64-bit.exe

9.  Q:  安装了Git，但是还是提示没有安装Git怎么办？
	A:	方法一：卸载重新安装，安装时在“Adjusting your PATH environment”步骤的时候选择“Git from the command line and also from 3rd-party software”
		方法二：确认Git已经安装，再依次按以下步骤操作：
				Ⅰ 右键点击 “此电脑” 或 “计算机”，选择 “属性”。
				Ⅱ 点击左侧的 “高级系统设置”。
				Ⅲ 在 “系统属性” 窗口中，点击 “环境变量”。
				Ⅳ 在 “系统变量” 部分，找到并选择 Path 变量，然后点击 “编辑”。
				Ⅴ 在 “编辑环境变量” 窗口中，点击 “新建”，然后输入 Git 的安装路径，例如 C:\Program Files\Git\cmd。
				Ⅵ 点击 “确定” 保存更改。
		无论哪种方式，都需要重启Powershell。

10. Q:	我是中文用户名，怎么办？
	A:	按照以下操作即可：
		(1) 先改用户名(英文)，然后重启
		(2) 然后cmd运行net user administrator /active:yes 启用Admin账户
		(3) 重启，直接进入admin账户，别进自己账户
		(4) 打开注册表HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Profilelist在里面找到中文名用户的对应所在的ProfileImagePath，双击它，改为要修改的用户名(英文)
		(5) 打开C:\user里面把之前的账户的文件夹改为上面你设置的用户名(英文)后重启电脑，登录你新的用户名
		(6) cmd运行net user administrator /active:no 禁用Admin账户



二、程序相关问题

0.	Q:	脚本启动出错。
	A:	检查是否有复制config.example.yaml并命名为config.yaml。

1.  Q:	为什么一直治疗传送不了
	A:	更新至最新版或者手动将地图缩放放到最大（地图界面右边的条拉到最上面）

2.	Q:	为什么搜索到了声骸但是没有走到就退出了
	A:	增加Config中的MaxIdleTime和MaxEchoAbsorptionTime时间。

3.	Q:	为什么角色连招很慢、有卡顿情况？
	A:	首先确认你是不是使用GPU进行OCR的（程序按F5启动后会以WARN输出）
		其次确认你的连招是否和角色一一对应，1号位角色对应第一行，2号位角色对应第二行，3号位角色对应第三行。
		最后确认连招中有没有大量的等待时间，等待时间建议用a(1)这种连续普攻进行填充。

4.	Q:	提示未找到声骸配置文件
	A:	复制echo_config.example.yaml并命名为echo_config.yaml再修改其中的配置为你想留的声骸。

5.	Q:	我只想打一个BOSS怎么办？
	A:	将TargetBoss中不打的BOSS前面加上# 注释掉，例如：# - "角"

6.	Q: 	我想修改某个BOSS的入场等待时间，该怎么做？
	A:	background\utlis.py里面搜索def check_boss，找到相应的BOSS下面的wait_time，将其值进行修改并保存即可
	
7.	Q:	为什么脚本会抢鼠标？
	A:	不是脚本抢鼠标，而是鸣潮传送完毕后会强制把鼠标挪到鸣潮窗口正中央。

8.	Q:	脚本提示某某功能未启用是为什么？
	A:	Config里查找该功能。

9.  Q:  为什么某个BOSS声骸识别不到？
	A:  尝试关闭Config中的EchoSearchModelChange。

10. Q:	自动更新下载下来的zip提示已损坏怎么办？
	A:	将Config中的UpdateType从Download改为Git后重试

11.	Q:	自动更新老是网络错误怎么办？
	A:	Gitee注册一个账号，然后在个人中心的私人令牌里面生成新令牌，输入描述，选择projects，点击提交，
		之后在弹框中复制个人令牌，输入到Config的GiteeAccessToken里面即可

12.	Q:	老是无法判断游戏状态怎么办？
	A:	请确认你是否使用修改过切人的键位和R按键的键位，如有修改，请还原默认设置。

13. Q:	战斗次数短时间大量增加是什么情况？
	A:	任务列表有那种游戏内时间几点到几点的任务，就会出现这个情况，游戏内时间到了任务时间，任务文字会覆盖掉战斗文字。
		完成该任务即可。